---
phase: "07.1"
plan: "03"
subsystem: leads-agent
tags: [cleanup, scope-documentation, dead-code-removal, operations-layer]
dependency_graph:
  requires: ["07.1-02"]
  provides: ["clean-mcp-tools", "scope-documentation"]
  affects: [".planning/ROADMAP.md", ".planning/REQUIREMENTS.md"]
tech_stack:
  added: []
  patterns: ["scope-documentation", "comment-as-contract"]
key_files:
  modified:
    - src/mcp/leads-agent/tools/score.ts
    - src/mcp/leads-agent/tools/export.ts
    - .planning/ROADMAP.md
    - .planning/REQUIREMENTS.md
decisions:
  - "SC-1 success criteria reframed to accept batch_score_list (workspace-level) and export campaign management as explicitly out of scope — LEAD-05 remains checked"
  - "NOTE comments replaced with SCOPE comments using explicit LEAD-05 exclusion language — scope-as-documentation pattern"
  - "Dead operations imports removed (no eslint-disable suppression needed) — clean TypeScript"
metrics:
  duration: "~5 minutes"
  completed: "2026-02-27"
  tasks: 2
  files_modified: 4
---

# Phase 7.1 Plan 03: SC-1 Gap Closure — Dead Imports and Scope Documentation Summary

**One-liner:** Removed dead `operations` imports with eslint-disable suppression from score.ts and export.ts, and formally documented that workspace-level batch scoring and campaign management are accepted out-of-scope divergences for LEAD-05 (Phase 8 deferred).

## What Was Done

This plan executed Option 3 from VERIFICATION.md: lowest-cost gap closure that reflects reality. The plan had no functional changes — only dead import removal and documentation upgrades.

### Task 1: Remove dead imports and update divergence documentation

**score.ts:**
- Removed `import * as operations from "@/lib/leads/operations"; // eslint-disable-line @typescript-eslint/no-unused-vars` (line 15)
- Updated comment block inside `batch_score_list` handler from `NOTE:` to `SCOPE:` with explicit "out of scope for LEAD-05" language and Phase 8 deferral reference

**export.ts:**
- Removed `import * as operations from "@/lib/leads/operations"; // eslint-disable-line @typescript-eslint/no-unused-vars` (line 25)
- Updated comment block inside `confirm=true` path from `NOTE:` to `SCOPE:` with explicit "out of scope for LEAD-05" language and Phase 8 deferral reference

Both files compile cleanly with zero eslint-disable comments and zero dead imports.

### Task 2: Update ROADMAP SC-1 and REQUIREMENTS LEAD-05

**ROADMAP.md Phase 7.1 SC-1:**
- Replaced "zero divergent implementations" claim with an accepted-exclusions statement
- Now explicitly lists: `search_people`, `create_list`, `add_to_list`, `view_list` as migrated; `batch_score_list` (workspace-level) and `export_to_emailbison confirm path` (campaign management) as formally deferred to Phase 8

**REQUIREMENTS.md LEAD-05:**
- Added inline scope note to the checked requirement
- Documents what IS covered: search, list CRUD, list scoring
- Documents what IS excluded: workspace-level batch scoring, campaign management in MCP export
- LEAD-05 checkbox remains checked — scope clarification, not a regression

## Verification Results

All six verification checks passed:

1. `npx tsc --noEmit` — zero errors (dead import removal doesn't break anything)
2. `grep -rn "eslint-disable" score.ts export.ts` — zero matches
3. `grep -rn "import.*operations" score.ts export.ts` — zero matches
4. `grep -n "out of scope for LEAD-05"` — one match per file
5. `grep "LEAD-05" REQUIREMENTS.md` — shows scope note with "Excluded: workspace-level batch scoring and campaign management"
6. `grep "Accepted exclusions" ROADMAP.md` — returns updated SC-1 text

## Commits

| Task | Commit | Description |
|------|--------|-------------|
| Task 1 | 5d224df | refactor(07.1-03): remove dead operations imports and update scope docs in score.ts and export.ts |
| Task 2 | 72902a5 | docs(07.1-03): update ROADMAP SC-1 and REQUIREMENTS LEAD-05 scope documentation |

## Decisions Made

1. **SC-1 reframed, not downgraded:** The success criterion was over-specified ("zero divergent implementations" is factually wrong for workspace-level scope differences). Accepted-exclusions language reflects that the four main MCP tools are fully migrated, and the two carve-outs are legitimate Phase 8 deferrals — not gaps.

2. **LEAD-05 remains checked:** This was scope clarification, not a regression. The operations layer IS shared for search, lists, and scoring. Campaign management and workspace-level batch scoring are architectural concerns that require the Phase 8 Campaign entity.

3. **SCOPE over NOTE pattern:** Upgrading comments from `NOTE:` to `SCOPE:` with explicit requirement references creates scope-as-documentation — future developers can immediately understand WHY the inline Prisma is intentional and WHEN it will be unified.

## Deviations from Plan

None — plan executed exactly as written.

## Phase 7.1 Status

All three plans complete:
- 07.1-01: Surgical fixes (apiToken error, conversationContext wiring, scoreList confirm gate)
- 07.1-02: MCP tools migration to operations layer (search, lists migrated; score, export documented)
- 07.1-03: SC-1 gap closure (dead imports removed, scope formally documented)

Phase 7.1 is fully complete. Next: Phase 8 — Campaign Entity + Writer Integration.

## Self-Check: PASSED

- FOUND: src/mcp/leads-agent/tools/score.ts
- FOUND: src/mcp/leads-agent/tools/export.ts
- FOUND: .planning/ROADMAP.md
- FOUND: .planning/REQUIREMENTS.md
- FOUND: .planning/phases/07.1-leads-agent-integration-fixes/07.1-03-SUMMARY.md
- FOUND commit: 5d224df (refactor: remove dead operations imports)
- FOUND commit: 72902a5 (docs: update ROADMAP SC-1 and REQUIREMENTS LEAD-05)
